<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClassWatch - Student Attendance & Behavior Monitoring System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    primary: '#2563EB',
                    secondary: '#64748B',
                    success: '#10B981',
                    warning: '#F59E0B',
                    danger: '#EF4444'
                }
            }
        }
    };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .face-detection-box {
            position: absolute;
            border: 2px solid #10B981;
            border-radius: 4px;
            background: rgba(16, 185, 129, 0.1);
        }
        .behavior-warning-box {
            position: absolute;
            border: 2px solid #F59E0B;
            border-radius: 4px;
            background: rgba(245, 158, 11, 0.1);
        }
        .camera-feed {
            background: #000;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <!-- @COMPONENT: AppHeader -->
    <header class="bg-white shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-primary">ClassWatch</h1>
                    </div>
                    <nav class="hidden md:ml-10 md:flex space-x-8">
                        <a href="#" class="text-primary border-b-2 border-primary pb-4 text-sm font-medium">Dashboard</a>
                        <a href="#" class="text-slate-500 hover:text-slate-700 pb-4 text-sm font-medium">Students</a>
                        <a href="#" class="text-slate-500 hover:text-slate-700 pb-4 text-sm font-medium">Attendance</a>
                        <a href="#" class="text-slate-500 hover:text-slate-700 pb-4 text-sm font-medium">Reports</a>
                        <a href="#" class="text-slate-500 hover:text-slate-700 pb-4 text-sm font-medium">Settings</a>
                    </nav>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="text-slate-400 hover:text-slate-500">
                        <i class="fas fa-bell text-lg"></i>
                    </button>
                    <div class="flex items-center space-x-2">
                        <img class="h-8 w-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=32&h=32" alt="Teacher profile" />
                        <span class="text-sm font-medium">Dr. Smith</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: AppHeader -->

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- @COMPONENT: CameraFeedSection -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-lg font-semibold text-slate-800">Live Camera Feed</h2>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-success rounded-full animate-pulse"></div>
                                <span class="text-sm text-slate-600">Recording</span>
                            </div>
                            <button class="bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700 transition-colors">
                                <i class="fas fa-video mr-2"></i>Start Class
                            </button>
                        </div>
                    </div>
                    
                    <!-- Camera Feed Display -->
                    <div class="camera-feed aspect-video bg-slate-900 rounded-lg relative">
                        <!-- Simulated camera feed background -->
                        <!-- A classroom scene with students at desks -->
                        <img src="https://pixabay.com/get/g0fd09186ddb08638d9a794f9b67b69f2c15fdfeb7a1a14b16a666afbd42c57dd0ae56d3157921516ba5bacfab343582c8a844c482d314d65d88d9bce82b039f9_1280.jpg" 
                             alt="Classroom with students" class="w-full h-full object-cover rounded-lg" />
                        
                        <!-- Face detection boxes overlay -->
                        <div class="face-detection-box" style="top: 25%; left: 15%; width: 80px; height: 100px;">
                            <div class="bg-success text-white text-xs px-2 py-1 rounded-b-md">John Doe - Present</div>
                        </div>
                        <div class="face-detection-box" style="top: 30%; left: 45%; width: 80px; height: 100px;">
                            <div class="bg-success text-white text-xs px-2 py-1 rounded-b-md">Sarah Johnson - Present</div>
                        </div>
                        <div class="behavior-warning-box" style="top: 35%; right: 20%; width: 90px; height: 110px;">
                            <div class="bg-warning text-white text-xs px-2 py-1 rounded-b-md">Mike Chen - Phone Detected</div>
                        </div>
                        
                        <!-- Camera controls overlay -->
                        <div class="absolute bottom-4 left-4 flex space-x-2">
                            <button class="bg-black/50 text-white p-2 rounded-md hover:bg-black/70 transition-colors">
                                <i class="fas fa-expand"></i>
                            </button>
                            <button class="bg-black/50 text-white p-2 rounded-md hover:bg-black/70 transition-colors">
                                <i class="fas fa-camera"></i>
                            </button>
                            <button class="bg-black/50 text-white p-2 rounded-md hover:bg-black/70 transition-colors">
                                <i class="fas fa-cog"></i>
                            </button>
                        </div>
                        
                        <!-- Detection status -->
                        <div class="absolute top-4 right-4 bg-black/70 text-white px-3 py-2 rounded-md text-sm">
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-eye text-success"></i>
                                <span>3 Faces Detected</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Detection Controls -->
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h3 class="font-medium text-slate-800 mb-2">Face Detection</h3>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-slate-600">Status</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-success rounded-full"></div>
                                    <span class="text-sm text-success font-medium">Active</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h3 class="font-medium text-slate-800 mb-2">Behavior Monitor</h3>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-slate-600">Phone Detection</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-warning rounded-full"></div>
                                    <span class="text-sm text-warning font-medium">1 Alert</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h3 class="font-medium text-slate-800 mb-2">Attendance Rate</h3>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-slate-600">Present</span>
                                <span class="text-sm text-success font-bold">85%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: CameraFeedSection -->

            <!-- @COMPONENT: ClassControlSidebar -->
            <div class="space-y-6">
                <!-- Class Settings -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Class Settings</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Class Duration</label>
                            <div class="flex items-center space-x-2">
                                <input type="number" value="90" class="w-20 px-3 py-2 border border-slate-300 rounded-md text-sm" />
                                <span class="text-sm text-slate-600">minutes</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Attendance Threshold</label>
                            <div class="flex items-center space-x-2">
                                <input type="number" value="75" class="w-20 px-3 py-2 border border-slate-300 rounded-md text-sm" />
                                <span class="text-sm text-slate-600">% of class time</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <label class="text-sm font-medium text-slate-700">Mobile Detection</label>
                            <button class="bg-primary text-white px-3 py-1 rounded-full text-xs">ON</button>
                        </div>
                        <div class="flex items-center justify-between">
                            <label class="text-sm font-medium text-slate-700">Talking Detection</label>
                            <button class="bg-slate-300 text-slate-700 px-3 py-1 rounded-full text-xs">OFF</button>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <button class="w-full bg-success text-white py-3 rounded-md font-medium hover:bg-green-600 transition-colors">
                            <i class="fas fa-play mr-2"></i>Start Monitoring
                        </button>
                        <button class="w-full bg-slate-200 text-slate-700 py-3 rounded-md font-medium hover:bg-slate-300 transition-colors">
                            <i class="fas fa-download mr-2"></i>Export Attendance
                        </button>
                        <button class="w-full bg-slate-200 text-slate-700 py-3 rounded-md font-medium hover:bg-slate-300 transition-colors">
                            <i class="fas fa-user-plus mr-2"></i>Add Student
                        </button>
                    </div>
                </div>

                <!-- Current Warnings -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Active Warnings</h3>
                    <div class="space-y-3">
                        <!-- @MAP: warnings.map(warning => ( -->
                        <div class="bg-warning/10 border border-warning/30 rounded-md p-3">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-slate-800" data-bind="warning.studentName">Mike Chen</p>
                                    <p class="text-xs text-warning" data-bind="warning.violation">Mobile phone usage detected</p>
                                </div>
                                <button class="text-warning hover:text-orange-600">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                        
                        <div class="bg-danger/10 border border-danger/30 rounded-md p-3">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-slate-800">Emma Davis</p>
                                    <p class="text-xs text-danger">Not detected for 10 minutes</p>
                                </div>
                                <button class="text-danger hover:text-red-600">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: ClassControlSidebar -->
        </div>

        <!-- @COMPONENT: AttendanceTable -->
        <div class="mt-8 bg-white rounded-lg shadow-sm">
            <div class="px-6 py-4 border-b border-slate-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-slate-800">Student Attendance</h3>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-slate-600">Class: CS-101</span>
                            <span class="text-sm text-slate-400">|</span>
                            <span class="text-sm text-slate-600">35 Students</span>
                        </div>
                        <button class="bg-slate-100 text-slate-700 px-4 py-2 rounded-md text-sm hover:bg-slate-200 transition-colors">
                            <i class="fas fa-filter mr-2"></i>Filter
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-slate-200">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Student</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Time Present</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Warnings</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Last Seen</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-slate-200">
                        <!-- @MAP: students.map(student => ( -->
                        <tr data-mock="true">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <img class="h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=40&h=40" alt="Student photo" />
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-slate-900">John Doe</div>
                                        <div class="text-sm text-slate-500">ID: STU001</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-success/10 text-success">Present</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-900">65 mins</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="text-sm text-slate-500">None</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500">Now</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button class="text-primary hover:text-blue-700">Edit</button>
                            </td>
                        </tr>
                        
                        <tr data-mock="true">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <img class="h-10 w-10 rounded-full" src="https://pixabay.com/get/gb847d2e70f187974192f7cd80ec59fb548b1ecd8c3b1a53c6777be1157e265a2162cc7a054698ba011df89f6f9c9fc2b95643a3e1beac06cf1609f8ed5a52167_1280.jpg" alt="Student photo" />
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-slate-900">Sarah Johnson</div>
                                        <div class="text-sm text-slate-500">ID: STU002</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-success/10 text-success">Present</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-900">68 mins</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="text-sm text-slate-500">None</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500">2 mins ago</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button class="text-primary hover:text-blue-700">Edit</button>
                            </td>
                        </tr>
                        
                        <tr data-mock="true">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <img class="h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1507152832244-10d45c7eda57?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=40&h=40" alt="Student photo" />
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-slate-900">Mike Chen</div>
                                        <div class="text-sm text-slate-500">ID: STU003</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-warning/10 text-warning">Warning</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-900">45 mins</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs rounded-full bg-warning/10 text-warning">Mobile</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500">Now</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button class="text-primary hover:text-blue-700">Edit</button>
                            </td>
                        </tr>
                        
                        <tr data-mock="true">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <img class="h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=40&h=40" alt="Student photo" />
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-slate-900">Emma Davis</div>
                                        <div class="text-sm text-slate-500">ID: STU004</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-danger/10 text-danger">Absent</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-900">15 mins</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="inline-flex px-2 py-1 text-xs rounded-full bg-danger/10 text-danger">Not Detected</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500">10 mins ago</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button class="text-primary hover:text-blue-700">Edit</button>
                            </td>
                        </tr>
                        <!-- @END_MAP )) -->
                    </tbody>
                </table>
            </div>
        </div>
        <!-- @END_COMPONENT: AttendanceTable -->
    </div>

    <script>
        (function() {
            // TODO: Implement camera access using navigator.mediaDevices.getUserMedia()
            // TODO: Integrate OpenCV.js or similar for face detection
            // TODO: Implement real-time face recognition and tracking
            // TODO: Add behavior detection algorithms for mobile phone usage
            // TODO: Connect to backend API for attendance data
            // TODO: Implement warning system with notifications
            
            // Mock functionality for demonstration
            console.log('ClassWatch System - Mock Implementation');
            
            // Simulate real-time updates
            function updateAttendanceStatus() {
                const statusElements = document.querySelectorAll('tbody tr');
                statusElements.forEach(row => {
                    // Mock status updates would happen here
                });
            }
            
            // Mock camera initialization
            function initializeCamera() {
                console.log('Camera access would be requested here');
                // navigator.mediaDevices.getUserMedia({ video: true })
            }
            
            // Mock face detection
            function startFaceDetection() {
                console.log('Face detection would start here');
                // OpenCV face detection implementation
            }
            
            // Initialize mock system
            document.addEventListener('DOMContentLoaded', function() {
                console.log('ClassWatch system initialized');
                // Add event listeners for buttons and controls
                
                const startButton = document.querySelector('button[class*="bg-primary"]');
                if (startButton) {
                    startButton.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Starting class monitoring...');
                        // TODO: Start actual monitoring functionality
                    });
                }
            });
        })();
    </script>
</body>
</html>